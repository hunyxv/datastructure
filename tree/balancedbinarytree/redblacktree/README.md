## 红黑树

### 红黑树的定义

红黑树是一种自平衡二叉查找树，是在计算机科学中用到的一种数据结构，典型的用途是实现关联数组。它是在1972年由鲁道夫·贝尔发明的，称之为"对称二叉B树"，它现代的名字是在 Leo J. Guibas 和 Robert Sedgewick 于1978年写的一篇论文中获得的。它是复杂的，但它的操作有着良好的最坏情况运行时间，并且在实践中是高效的: **它可以在O(logn)时间内做查找，插入和删除，这里的n是树中元素的数目**。

红黑树和AVL树一样都对插入时间、删除时间和查找时间提供了最好可能的最坏情况担保。这不只是使它们在时间敏感的应用如实时应用（real time application）中有价值，而且使它们有在提供最坏情况担保的其他数据结构中作为建造板块的价值；例如，在计算几何中使用的很多数据结构都可以基于红黑树。此外，红黑树还是2-3-4树的一种等同，它们的思想是一样的，只不过红黑树是2-3-4树用二叉树的形式表示的。

红黑树性质：
- 每个节点或者是黑色，或者是红色。
- 根节点是黑色。
- 每个叶子节点（空叶子节点）是黑色。
- 如果一个节点是红色的，则它的子节点必须是黑色的
- 任意一个节点到叶子节点（可到达的节点），经过的黑色节点数量是一样的。

2-3 树与红黑树是同一种树，只不过红黑树是 2-3 树的一种只含 2 节点的表现形式。(注： 红黑树并不是只有这一种实现方式）。可以把 2-3 树的三节点看作二分搜索树中的两个节点 合作构成的一个节点，二其中小的一方就是红节点。

![2->黑色，3左红右黑](https://i.loli.net/2021/01/13/DF7vgAEaSTmHIez.png)

23树转红黑树：

![23->红黑](https://i.loli.net/2021/01/13/CrvXjAWtf93L6xG.jpg)

一个完整的红黑树，符合上面五条性质：

![redblacktree.jpeg](https://i.loli.net/2021/01/13/IB3seLQDc47F5nV.jpg)

### 插入节点

红黑树总是通过旋转和变色达到自平衡。那么在插入新节点时如何保持红黑树性质，怎么旋转？怎么变色？具体情景又不同变法（8 种场景）：

![readblacktree-insert.jpg](https://i.loli.net/2021/01/13/S8jbCesAVkNfBu4.jpg)

关于 I、S、P、PP 节点：

![ppp.jpg](https://i.loli.net/2021/01/13/bROovBaLg7ApVd8.jpg)

### 删除节点

删除操作的所有情景，如下图所示：

![delete.jpg](https://i.loli.net/2021/01/13/dczBRPYo15VvpFN.jpg)